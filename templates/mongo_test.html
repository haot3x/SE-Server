<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Hout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Loading Bootstrap -->

    <link href={{ url_for('static', filename='../static/Flat-UI-master/bootstrap/css/bootstrap.css' )}} rel="stylesheet">
    <link href={{ url_for('static', filename='../static/Flat-UI-master/css/flat-ui.css' )}} rel="stylesheet">
    <link href={{ url_for('static', filename='../static/Flat-UI-master/images/favicon.ico' )}} rel="shortcut icon">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body style=''> <!--for the navibar always top-->

    <div class='container'>
      <div class='row'>
      <div class='col-md-6'>
            <h2>TEST get and post</h2>
      </div>
      </div>

      <div class='row'>

        <div class="col-md-6">    
                
      
            <button id='getAjaxBtn' class="btn">GET AJAX</button>

            <table id='demoTable' class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>id</th>
                  <th>k1</th>
                  <th>k2</th>
                </tr>
              </thead>
              <tbody>
              {% for m in models%}
                <tr>
                  <td>{{ m.id }}</td>
                  <td>{{ m.k1 }}</td>
                  <td>{{ m.k2 }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>



        </div>
        <div class="col-md-6">    
       <form action="{{ url_for('test_api.test_mongo') }}" method="POST">

        <div class="form-group">
          <input type="text" id="k1" name="k1" placeholder="k1" class="form-control" />
        </div>
        <div class="form-group">
          <input type="text" id="k2" name="k2" placeholder="k2" class="form-control" />
        </div>
        
      <input class="btn btn-primary btn-lg btn-block" id="submit" name="submit" type="submit" value="POST FORM">

      
      
        </form>
      
      <!-- <button id='postAjaxBtn' class="btn">POST AJAX</button> -->


          

        </div>
      </div>
    </div>


    <!-- Load JS here for greater good =============================-->
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/jquery-1.8.3.min.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/jquery-ui-1.10.3.custom.min.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/jquery.ui.touch-punch.min.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/bootstrap.min.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/bootstrap-select.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/bootstrap-switch.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/flatui-checkbox.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/flatui-radio.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/jquery.tagsinput.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/jquery.placeholder.js')}} ></script>
    <script src={{ url_for('static', filename='../static/Flat-UI-master/js/jquery.scrollTo.min.js')}} ></script>
   
    <script>
        $(document).ready(function() {   
          
          $("#getAjaxBtn").click(function(){
            
            $.get( "{{ url_for('test_api.test_mongo') }}", function(data) {
              
              objs = $.parseJSON(data);
              $.each(objs,function(i,obj){
                //console.log(obj);
                newtr = "<tr><td>" + obj['_id']['$oid']+ "</td>" 
                + "<td>" + obj['k1']+ "</td>" 
                + "<td>" + obj['k2']+ "</td></tr>";

                $('#demoTable tr:last').after(newtr);
              });

            });

          });

          $("#postAjaxBtn").click(function(event){

          var data = {"k1":$("#k1").val(),"k2":$("#k2").val()}
          var djson = JSON.stringify(data);

          console.log(djson);
          $.ajax({
            type: "POST",
            url: "{{ url_for('test_api.test_mongo') }}",
            data: djson,
            error: function(e) {
              console.log("get an error");
              console.log(e);
            },
            success: function(data){
              alert(data);
            },
            dataType: "json"
          });

          });


        });
    </script>
  </body>
</html>
